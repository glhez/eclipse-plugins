language: java
# try to fix the 'error' in request in Travis.
branches:
  except:
    - gh-pages
jdk:
  - oraclejdk8
cache:
  directories:
    - $HOME/.m2/repository
script:
  - 'find "$HOME/.m2/repository" -type f ( -name "*.lastUpdated" -or -name "*SNAPSHOT*" ")" -print -delete'
  - './mvnw clean install'
  - cp -v site/index.md com.github.glhez.eclipse.releng.updatesite/target/repository
install: true

deploy:
  - provider: pages
    skip_cleanup: true
    local_dir: com.github.glhez.eclipse.releng.updatesite/target/repository
    github_token: $GITHUB_TOKEN
    on:
      branch: master
